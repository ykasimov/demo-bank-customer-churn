schema: '2.0'
stages:
  data_split:
    cmd: python stages/data_split.py --config=params.yaml
    deps:
    - path: data/Churn_Modelling.csv
      md5: 73fba4fd85b6dbaf95c9d5e3836d3926
      size: 684860
    - path: stages/data_split.py
      md5: 519fbe22a8ce712999f28010f3c56fe6
      size: 1606
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - Age
          - HasCrCard
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
    outs:
    - path: data/X_test.pkl
      md5: 8a5460dffc11c27a79bf536e74a86c01
      size: 65803
    - path: data/X_train.pkl
      md5: 18484bff4d9b6edd0bfb61e7826e7e1d
      size: 195813
    - path: data/y_test.pkl
      md5: 7743d704b8b97cc303ceef12b9be6832
      size: 60613
    - path: data/y_train.pkl
      md5: c5e58ac55c3f8077ffac66b0e9b3536a
      size: 180622
  train:
    cmd: python stages/train.py --config=params.yaml
    deps:
    - path: data/X_train.pkl
      md5: 18484bff4d9b6edd0bfb61e7826e7e1d
      size: 195813
    - path: data/y_train.pkl
      md5: c5e58ac55c3f8077ffac66b0e9b3536a
      size: 180622
    - path: stages/train.py
      md5: d54e4eaf7ad9f7c5bb9a740d48a2f9d2
      size: 2536
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - Age
          - HasCrCard
          targ_col: Exited
          random_state: 42
          model_dir: model/
        train:
          model_type: randomforest
          params:
            n_estimators: 150
            max_depth: 20
    outs:
    - path: model//clf-model
      md5: 914e8e5f833486a7f81310646c4faf28
      size: 6079773
    - path: model//clf-model.mlem
      md5: 96f8c28b5d247b9ae46ae01c708a1711
      size: 1195
  eval:
    cmd: python stages/eval.py --config=params.yaml
    deps:
    - path: data/X_test.pkl
      md5: 8a5460dffc11c27a79bf536e74a86c01
      size: 65803
    - path: data/y_test.pkl
      md5: 7743d704b8b97cc303ceef12b9be6832
      size: 60613
    - path: model//clf-model
      md5: 914e8e5f833486a7f81310646c4faf28
      size: 6079773
    - path: model//clf-model.mlem
      md5: 96f8c28b5d247b9ae46ae01c708a1711
      size: 1195
    - path: stages/eval.py
      md5: 0f8bd41fc66ef9117d6e3451a3ed3631
      size: 2700
    params:
      params.yaml:
        base:
          project: bank_customer_churn
          data_dir: data
          data_fname: Churn_Modelling.csv
          cat_cols:
          - Geography
          num_cols:
          - Age
          - HasCrCard
          targ_col: Exited
          random_state: 42
          model_dir: model/
        data_split:
          test_size: 0.25
        train:
          model_type: randomforest
          params:
            n_estimators: 150
            max_depth: 20
    outs:
    - path: eval_plots/cm.png
      md5: 95cf358bc5eb5a77b3a97d29726cff9d
      size: 12924
    - path: eval_plots/plots/sklearn/roc.json
      md5: 2b6f6f86066d425fd8f98b3d8dec753c
      size: 36865
    - path: feat_imp.csv
      md5: a57b2715fea7f605c88bd2e5f4b8066a
      size: 103
    - path: metrics.json
      md5: 19921bc0ab8dc858470d1ac3d20fc96c
      size: 68
    - path: models/perm_imp.joblib
      md5: b117ff04dec6a8733a8d85a4bbdfbf22
      size: 6083259
